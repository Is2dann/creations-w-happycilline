{% extends "base.html" %}
{% load static %}
{% block title %}Shop Categories - Creations with Happycilline{% endblock %}
{% block content %}

<div class="container py-4">
  <div class="d-flex flex-wrap justify-content-between align-items-center mb-3">
    <h1 class="mb-0">Shop by Category</h1>

    <form class="d-flex" action="{% url 'products:list' %}" method="get" role="search">
      <input class="form-control form-control-sm me-2" type="search" name="q" placeholder="Search productsâ€¦">
      <button class="btn btn-sm btn-outline-secondary">Search</button>
    </form>
  </div>

  <div class="row g-3">
    {% for cat in categories %}
      <div class="col-6 col-md-4 col-lg-3">
        <a class="text-decoration-none" href="{% url 'products:category' cat.slug %}">
          <div class="card h-100">
            <div class="card-body d-flex flex-column align-items-center justify-content-center text-center">
              <h2 class="h5 m-0">{{ cat.name }}</h2>
              {% if cat.product_count %}
                <div class="text-muted small mt-1">{{ cat.product_count }} item{{ cat.product_count|pluralize }}</div>
              {% endif %}
            </div>
          </div>
        </a>
      </div>
    {% empty %}
      <p>No categories yet.</p>
    {% endfor %}
  </div>

  {% if latest_products %}
    <hr class="my-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="h4 mb-0">Latest Products</h2>
      <a class="btn btn-cwh-outline btn-sm" href="{% url 'products:list' %}">View all</a>
    </div>
    <div class="row g-3">
      {% for p in latest_products %}
        <div class="col-6 col-md-4 col-lg-3">
          {% include 'products/partials/_product_card.html' with product=p %}
        </div>
      {% endfor %}
    </div>
  {% endif %}
</div>

{% endblock %}
